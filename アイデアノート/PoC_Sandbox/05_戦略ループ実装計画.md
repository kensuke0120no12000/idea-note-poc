# 戦略ループ実装計画

## 1. 目的

戦術ループによって蓄積されたイベントログ（生の経験データ）を分析し、そこから新たな知見やルールを抽出し、ナレッジベースを自律的に拡充・更新する「戦略ループ」のプロトタイプを実装する。
これにより、システムが自己学習し、時間と共に賢くなっていく能力を実証する。

## 2. 参照論文

- **論文名**: From Unstructured Communication to Intelligent RAG: Multi-Agent Automation for Supply Chain Knowledge Bases
- **著者**: Yao Zhang, Zaixi Shang, Silpan Patel, Mikel Zuniga
- **arXiv ID**: `arXiv:2506.17484`
- **URL**: [https://arxiv.org/abs/2506.17484](https://arxiv.org/abs/2506.17484)
- **概要**: サポートチケットのようなノイズの多い非構造化データから、高品質なナレッジベースを自動構築するオフライン手法を提案。3つの専門エージェント（カテゴリ発見、分類、ナレッジ合成）を連携させることで、データ量を元の3.4%に圧縮しつつ、RAGシステムの回答精度を大幅に向上させることを実証している。

## 3. 実装の主要コンポーネント

論文で提案されている3つの主要エージェントを、個別のモジュールとして実装する。

1.  **カテゴリ発見エージェント (Category Discovery Agent)**
    *   **入力**: 大量のイベントログ
    *   **役割**: ログの内容をクラスタリング（グループ分け）し、これまで定義されていなかった新しい問題のカテゴリ（例：「特定のIPからの異常なログイン試行」など）を発見・定義する。
    *   **出力**: 新しいカテゴリのリストと、その定義。

2.  **分類エージェント (Classification Agent)**
    *   **入力**: 1つのイベントログ ＋ カテゴリのリスト（既存＋新規）
    *   **役割**: 個々のイベントが、どのカテゴリに属するかを判定（分類）する。
    *   **出力**: イベントログ ＋ 分類されたカテゴリID。

3.  **ナレッジ合成エージェント (Knowledge Synthesis Agent)**
    *   **入力**: 特定のカテゴリに分類された、複数のイベントログ群。
    *   **役割**: 同じカテゴリに属するログ群の共通点やパターンを分析し、そこから汎用的な知識や対応策（ナレッジ）を要約・生成する。
    *   **出力**: ナレッジベースに追加すべき、新しいマークダウン形式のドキュメント。

## 4. 開発ステップ（案）

### Step 1: 準備
1.  **ダミーログデータの生成**:
    *   様々な種類のイベントログ（JSON形式）を、最低でも100件程度、ファイルとして生成・準備する。これらが我々の分析対象となる。

### Step 2: 各エージェントの実装
1.  **カテゴリ発見エージェントの実装**:
    *   ログを読み込み、その内容のベクトルを生成。クラスタリングアルゴリズム（例: k-means）を適用し、各クラスタを要約して新しいカテゴリを提案するロジックを実装する。
2.  **分類エージェントの実装**:
    *   入力されたログとカテゴリリストを元に、LLMに最適なカテゴリを選択させるプロンプトを設計・実装する。
3.  **ナレッジ合成エージェントの実装**:
    *   同一カテゴリのログ群をLLMに渡し、共通の問題点、原因、有効な解決策などを要約させ、マークダウン形式で出力させるプロンプトを設計・実装する。

### Step 3: 統合と評価
1.  **パイプラインの構築**:
    *   上記3エージェントの処理を連携させ、「ログの投入」から「新ナレッジの生成」までを一貫して実行できるスクリプトを構築する。
2.  **出力の評価**:
    *   生成されたナレッジが、元のログの内容を的確に反映し、かつ汎用的で有用な知識になっているかを、手動で評価する。 